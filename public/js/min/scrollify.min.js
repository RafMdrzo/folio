!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(c,a,a.document)}):"object"==typeof module&&module.exports?module.exports=b(require("jquery"),a,a.document):b(jQuery,a,a.document)}("undefined"!=typeof window?window:this,function(a,b,c,d){"use strict";function e(){return b.innerHeight+I.offset}function f(c,d,f,g){if(t===c&&(f=!1),B===!0)return!0;if(p[c]){if(y=!1,E===!0&&(E=!1,I.afterRender()),f&&"function"==typeof I.before&&I.before(c,q)===!1)return!0;if(u=1,G=c?o[c]:0,E===!1&&t>c&&g===!1&&r[c]&&(k=e(),u=parseInt(q[c].outerHeight()/k),G=parseInt(o[c])+(q[c].outerHeight()-k)),I.updateHash&&I.sectionName&&(E!==!0||0!==c))if(history.pushState)try{history.replaceState(null,null,p[c])}catch(h){b.console&&console.warn("Scrollify warning: Page must be hosted to manipulate the hash value.")}else b.location.hash=p[c];if(t=c,d)a(I.target).stop().scrollTop(G),f&&I.after(c,q);else{if(z=!0,a().velocity?a(I.target).stop().velocity("scroll",{duration:I.scrollSpeed,easing:I.easing,offset:G,mobileHA:!1}):a(I.target).stop().animate({scrollTop:G},I.scrollSpeed,I.easing),b.location.hash.length&&I.sectionName&&b.console)try{a(b.location.hash).length&&console.warn("Scrollify warning: ID matches hash value - this will cause the page to anchor.")}catch(h){}a(I.target).promise().done(function(){z=!1,E=!1,f&&I.after(c,q)})}}}function g(a){function b(b){for(var c=0,d=a.slice(Math.max(a.length-b,1)),e=0;e<d.length;e++)c+=d[e];return Math.ceil(c/b)}var c=b(10),d=b(70);return c>=d?!0:!1}function h(a,b){for(var c=p.length;c>=0;c--)"string"==typeof a?p[c]===a&&(s=c,f(c,b,!0,!0)):c===a&&(s=c,f(c,b,!0,!0))}var i,j,k,l,m,n,o=[],p=[],q=[],r=[],s=0,t=0,u=1,v=!1,w=a(b),x=w.scrollTop(),y=!1,z=!1,A=!1,B=!1,C=[],D=(new Date).getTime(),E=!0,F=!1,G=0,H="onwheel"in c?"wheel":c.onmousewheel!==d?"mousewheel":"DOMMouseScroll",I={section:".section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,target:"html,body",standardScrollElements:!1,setHeights:!0,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:function(){},after:function(){},afterResize:function(){},afterRender:function(){}},J=function(d){function h(b){a().velocity?a(I.target).stop().velocity("scroll",{duration:I.scrollSpeed,easing:I.easing,offset:b,mobileHA:!1}):a(I.target).stop().animate({scrollTop:b},I.scrollSpeed,I.easing)}function t(b){b&&(x=w.scrollTop());var c=I.section;r=[],I.interstitialSection.length&&(c+=","+I.interstitialSection),I.scrollbars===!1&&(I.overflowScroll=!1),k=e(),a(c).each(function(b){var c=a(this);I.setHeights?c.is(I.interstitialSection)?r[b]=!1:c.css("height","auto").outerHeight()<k||"hidden"===c.css("overflow")?(c.css({height:k}),r[b]=!1):(c.css({height:c.outerHeight()}),I.overflowScroll?r[b]=!0:r[b]=!1):c.outerHeight()<k||I.overflowScroll===!1?r[b]=!1:r[b]=!0}),b&&w.scrollTop(x)}function E(c,d){var e=I.section;I.interstitialSection.length&&(e+=","+I.interstitialSection),o=[],p=[],q=[],a(e).each(function(c){var d=a(this);c>0?o[c]=parseInt(d.offset().top)+I.offset:o[c]=parseInt(d.offset().top),I.sectionName&&d.data(I.sectionName)?p[c]="#"+d.data(I.sectionName).toString().replace(/ /g,"-"):d.is(I.interstitialSection)===!1?p[c]="#"+(c+1):(p[c]="#",c===a(e).length-1&&c>1&&(o[c]=o[c-1]+(parseInt(a(a(e)[c-1]).outerHeight())-parseInt(a(b).height()))+parseInt(d.outerHeight()))),q[c]=d;try{a(p[c]).length&&b.console&&console.warn("Scrollify warning: Section names can't match IDs - this will cause the browser to anchor.")}catch(f){}b.location.hash===p[c]&&(s=c,v=!0)}),!0===c&&f(s,!1,!1,!1)}function G(){return r[s]?(x=w.scrollTop(),x>parseInt(o[s])?!1:!0):!0}function J(){return r[s]?(x=w.scrollTop(),k=e(),x<parseInt(o[s])+(q[s].outerHeight()-k)-28?!1:!0):!0}F=!0,a.easing.easeOutExpo=function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},l={handleMousedown:function(){return B===!0?!0:(y=!1,void(A=!1))},handleMouseup:function(){return B===!0?!0:(y=!0,void(A&&l.calculateNearest(!1,!0)))},handleScroll:function(){return B===!0?!0:(i&&clearTimeout(i),void(i=setTimeout(function(){return A=!0,y===!1?!1:(y=!1,void l.calculateNearest(!1,!0))},200)))},calculateNearest:function(a,b){x=w.scrollTop();for(var c,d=1,e=o.length,g=0,h=Math.abs(o[0]-x);e>d;d++)c=Math.abs(o[d]-x),h>c&&(h=c,g=d);(J()&&g>s||G())&&(s=g,f(g,a,b,!1))},wheelHandler:function(c){if(B===!0)return!0;if(I.standardScrollElements&&(a(c.target).is(I.standardScrollElements)||a(c.target).closest(I.standardScrollElements).length))return!0;r[s]||c.preventDefault();var d=(new Date).getTime();c=c||b.event;var e;e=c.originalEvent?c.originalEvent.wheelDelta||-c.originalEvent.deltaY||-c.originalEvent.detail:c.wheelDelta||-c.deltaY||-c.detail;var h=Math.max(-1,Math.min(1,e));if(C.length>149&&C.shift(),C.push(Math.abs(e)),d-D>200&&(C=[]),D=d,z)return!1;if(0>h){if(s<o.length-1&&J()){if(!g(C))return!1;c.preventDefault(),s++,z=!0,f(s,!1,!0,!1)}}else if(h>0&&s>0&&G()){if(!g(C))return!1;c.preventDefault(),s--,z=!0,f(s,!1,!0,!1)}},keyHandler:function(b){return B===!0||c.activeElement.readOnly===!1?!0:I.standardScrollElements&&(a(b.target).is(I.standardScrollElements)||a(b.target).closest(I.standardScrollElements).length)?!0:z===!0?!1:void(38==b.keyCode||33==b.keyCode?s>0&&G()&&(b.preventDefault(),s--,f(s,!1,!0,!1)):(40==b.keyCode||34==b.keyCode)&&s<o.length-1&&J()&&(b.preventDefault(),s++,f(s,!1,!0,!1)))},init:function(){I.scrollbars?(w.on("mousedown",l.handleMousedown),w.on("mouseup",l.handleMouseup),w.on("scroll",l.handleScroll)):a("body").css({overflow:"hidden"}),b.addEventListener(H,l.wheelHandler,{passive:!1}),w.on("keydown",l.keyHandler)}},m={touches:{touchstart:{y:-1,x:-1},touchmove:{y:-1,x:-1},touchend:!1,direction:"undetermined"},options:{distance:30,timeGap:800,timeStamp:(new Date).getTime()},touchHandler:function(b){if(B===!0)return!0;if(I.standardScrollElements&&(a(b.target).is(I.standardScrollElements)||a(b.target).closest(I.standardScrollElements).length))return!0;var c;if("undefined"!=typeof b&&"undefined"!=typeof b.touches)switch(c=b.touches[0],b.type){case"touchstart":m.touches.touchstart.y=c.pageY,m.touches.touchmove.y=-1,m.touches.touchstart.x=c.pageX,m.touches.touchmove.x=-1,m.options.timeStamp=(new Date).getTime(),m.touches.touchend=!1;case"touchmove":m.touches.touchmove.y=c.pageY,m.touches.touchmove.x=c.pageX,m.touches.touchstart.y!==m.touches.touchmove.y&&Math.abs(m.touches.touchstart.y-m.touches.touchmove.y)>Math.abs(m.touches.touchstart.x-m.touches.touchmove.x)&&(b.preventDefault(),m.touches.direction="y",m.options.timeStamp+m.options.timeGap<(new Date).getTime()&&0==m.touches.touchend&&(m.touches.touchend=!0,m.touches.touchstart.y>-1&&Math.abs(m.touches.touchmove.y-m.touches.touchstart.y)>m.options.distance&&(m.touches.touchstart.y<m.touches.touchmove.y?m.up():m.down())));break;case"touchend":m.touches[b.type]===!1&&(m.touches[b.type]=!0,m.touches.touchstart.y>-1&&m.touches.touchmove.y>-1&&"y"===m.touches.direction&&(Math.abs(m.touches.touchmove.y-m.touches.touchstart.y)>m.options.distance&&(m.touches.touchstart.y<m.touches.touchmove.y?m.up():m.down()),m.touches.touchstart.y=-1,m.touches.touchstart.x=-1,m.touches.direction="undetermined"))}},down:function(){s<o.length&&(J()&&s<o.length-1?(s++,f(s,!1,!0,!1)):(k=e(),Math.floor(q[s].height()/k)>u?(h(parseInt(o[s])+k*u),u+=1):h(parseInt(o[s])+(q[s].outerHeight()-k))))},up:function(){s>=0&&(G()&&s>0?(s--,f(s,!1,!0,!1)):u>2?(k=e(),u-=1,h(parseInt(o[s])+k*u)):(u=1,h(parseInt(o[s]))))},init:function(){if(c.addEventListener&&I.touchScroll){var a={passive:!1};c.addEventListener("touchstart",m.touchHandler,a),c.addEventListener("touchmove",m.touchHandler,a),c.addEventListener("touchend",m.touchHandler,a)}}},n={refresh:function(a,b){clearTimeout(j),j=setTimeout(function(){t(!0),E(b,!1),a&&I.afterResize()},400)},handleUpdate:function(){n.refresh(!1,!1)},handleResize:function(){n.refresh(!0,!1)},handleOrientation:function(){n.refresh(!0,!0)}},I=a.extend(I,d),t(!1),E(!1,!0),!0===v?f(s,!1,!0,!0):setTimeout(function(){l.calculateNearest(!0,!1)},200),o.length&&(l.init(),m.init(),w.on("resize",n.handleResize),c.addEventListener&&b.addEventListener("orientationchange",n.handleOrientation,!1))};return J.move=function(b){return b===d?!1:(b.originalEvent&&(b=a(this).attr("href")),void h(b,!1))},J.instantMove=function(a){return a===d?!1:void h(a,!0)},J.next=function(){s<p.length&&(s+=1,f(s,!1,!0,!0))},J.previous=function(){s>0&&(s-=1,f(s,!1,!0,!0))},J.instantNext=function(){s<p.length&&(s+=1,f(s,!0,!0,!0))},J.instantPrevious=function(){s>0&&(s-=1,f(s,!0,!0,!0))},J.destroy=function(){return F?(I.setHeights&&a(I.section).each(function(){a(this).css("height","auto")}),w.off("resize",n.handleResize),I.scrollbars&&(w.off("mousedown",l.handleMousedown),w.off("mouseup",l.handleMouseup),w.off("scroll",l.handleScroll)),b.removeEventListener(H,l.wheelHandler),w.off("keydown",l.keyHandler),c.addEventListener&&I.touchScroll&&(c.removeEventListener("touchstart",m.touchHandler,!1),c.removeEventListener("touchmove",m.touchHandler,!1),c.removeEventListener("touchend",m.touchHandler,!1)),o=[],p=[],q=[],r=[],E=!0,void(F=!1)):!1},J.update=function(){return F?void n.handleUpdate():!1},J.current=function(){return q[s]},J.currentIndex=function(){return s},J.disable=function(){B=!0},J.enable=function(){B=!1,F&&l.calculateNearest(!1,!1)},J.isDisabled=function(){return B},J.setOptions=function(c){return F?void("object"==typeof c?(I=a.extend(I,c),n.handleUpdate()):b.console&&console.warn("Scrollify warning: setOptions expects an object.")):!1},a.scrollify=J,J});